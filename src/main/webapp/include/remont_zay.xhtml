<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<p:panelGrid rendered="#{not empty quickSearch.selectedAvto}"
             styleClass="panelGridAvtoCard_bar_select_date">
    <p:row>
        <p:column style="white-space: nowrap;">
            <p:outputLabel value="Период"/>
        </p:column>
        <p:column style="white-space: nowrap;">
            <p:calendar showOn="button" value="#{quickSearch.selectedAvto.expl_date1}"
                        locale="ru" pattern="dd.MM.yyyy"/>
        </p:column>
        <p:column style="white-space: nowrap;">
            <p:calendar showOn="button" value="#{quickSearch.selectedAvto.expl_date2}"
                        locale="ru" pattern="dd.MM.yyyy"/>
        </p:column>
        <p:column style="white-space: nowrap;">
            <p:commandButton value="Показать" actionListener="#{quickSearch.getRemontZayCards}"
                             update=":form:tabview:remontZay_data"/>
        </p:column>
        <p:column style="text-align:right; width: 100%">
            <p:commandButton styleClass="p-mr-2" title="Добавить" icon="pi pi-plus"  actionListener="#{quickSearch.newRemontZayCards}"
                             oncomplete="PF('dlg_remontZay').show();" process="@this" update=":form:remontZayDetail"/>

            <p:commandButton title="Удалить" icon="fa fa-fw fa-trash" actionListener="#{quickSearch.deleteRemZayCards}"
                             update=":form:tabview:remontZay_data :form:growlAvto">
                <p:confirm header="Подтверждение" message="Удалить выбранную запись?" icon="pi pi-info-circle" update=":form:tabview:remontZay_data :form:growlAvto"/>
            </p:commandButton>


        </p:column>
    </p:row>
</p:panelGrid>

<p:dataTable id="remontZay_data" var="remontZay" value="#{quickSearch.selectedAvto.listRemontZayModel}"
             selection="#{quickSearch.selectedAvto.selectedRemontZay}"
             rendered="#{not empty quickSearch.selectedAvto}"
             scrollable="true" scrollWidth="1300" scrollHeight="410" selectionMode="single"
             rowKey="#{remontZay.id}"
             emptyMessage="нет записей">
    <p:ajax listener="#{quickSearch.onSelectedRemontZay}" event="rowDblselect" oncomplete="PF('dlg_remontZay').show();" update=":form:remontZayDetail"/>
    <p:column headerText="№" width="20">
        <h:outputText value="#{remontZay.num}"/>
    </p:column>
    <p:column headerText="Дата заявки" width="60">
        <h:outputText value="#{remontZay.date}">
            <f:convertDateTime pattern="dd.MM.yyyy"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Показания спидометра" width="100">
        <h:outputText value="#{remontZay.speed}">
            <f:convertNumber type="number" pattern="#"/>
        </h:outputText>
    </p:column>
    <p:column headerText="Водитель" width="200">
        <h:outputText value="#{remontZay.fio}"/>
    </p:column>
    <p:column headerText="Вид ТО" width="200">
        <h:outputText value="#{remontZay.vid_to}"/>
    </p:column>
    <p:column headerText="Организация" width="200">
        <h:outputText value="#{remontZay.org}"/>
    </p:column>



</p:dataTable>


</html>